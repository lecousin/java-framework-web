<?xml version="1.0" encoding="UTF-8"?>
<bundle
	xmlns="http://code.lecousin.net/java/net.lecousin.framework.web/bundle/0.1"
>
	<Injection xmlns="http://code.lecousin.net/java/net.lecousin.framework.injection/0.1">
		<property name="version" value="1.0"/>
		<Singleton id="testAuthenticationProvider" type="net.lecousin.framework.web.security.IAuthenticationProvider">
			<class name="net.lecousin.framework.web.test.TestAuthenticationProvider"/>
		</Singleton>
	</Injection>
	<bundle path="need_auth">
		<pre-filter class="net.lecousin.framework.web.filters.security.GetLoginFromQuery">
			<attribute name="usernameParameter" value="user"/>
			<attribute name="passwordParameter" value="pass"/>
		</pre-filter>
		<pre-filter class="net.lecousin.framework.web.filters.security.RequiresRolesFilter">
			<attribute name="authenticationProvider" ref="testAuthenticationProvider"/>
			<attribute name="roles" value="Role1,Role2"/>
		</pre-filter>
		<pre-filter class="net.lecousin.framework.web.test.TestPreFilter"/>
		<processor path="test1" class="net.lecousin.framework.web.test.Test1Processor"/>
		<processor path="test2" class="net.lecousin.framework.web.test.Test2Processor"/>
		<post-filter class="net.lecousin.framework.web.test.TestPostFilter"/>
	</bundle>
	<bundle path="cached">
		<pre-filter class="net.lecousin.framework.web.filters.CacheFilter">
			<attribute name="maxAge" value="10 days"/>
		</pre-filter>
		<processor path="" class="net.lecousin.framework.web.test.Test1Processor"/>
	</bundle>
	<bundle path="services">
		<custom-filter class="net.lecousin.framework.web.services.soap.filters.GetAuthenticationRequestFromSOAPHeader"/>
		<custom-filter class="net.lecousin.framework.web.test.TestSoapFilter"/>
		<service class="net.lecousin.framework.web.test.TestRestService"/>
		<service class="net.lecousin.framework.web.test.TestSoapService"/>
		<processor path="" class="net.lecousin.framework.web.services.doc.WebServicesDocumentation"/>
	</bundle>
	<bundle path="static">
		<bundle path="${version}">
			<pre-filter class="net.lecousin.framework.web.filters.CacheFilter">
				<attribute name="maxAge" value="1 hour"/>
			</pre-filter>
			<processor path="" class="net.lecousin.framework.web.StaticResourcesProcessor">
				<attribute name="fromClassPath" value="test-webserver/static"/>
				<attribute name="directoryPages" value="index.htm,index.html"/>
			</processor>
		</bundle>
		<processor path="" class="net.lecousin.framework.web.VersionRedirection">
			<attribute name="version" value="${version}"/>
		</processor>
	</bundle>
</bundle>